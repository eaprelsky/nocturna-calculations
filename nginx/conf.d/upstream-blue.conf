# Upstream configuration - BLUE deployment active
# This file is used when blue deployment is active

upstream nocturna_backend {
    # Primary: Blue deployment (active)
    server nocturna-prod-blue-api:8000 max_fails=3 fail_timeout=30s;
    
    # Backup: Green deployment (standby) - commented out when not active
    # server nocturna-prod-green-api:8000 backup;
    
    # Connection pool settings
    keepalive 32;
    keepalive_requests 100;
    keepalive_timeout 60s;
}
